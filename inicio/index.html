<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sistema Urinário Interativo</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 0; padding: 0; background: #f4f4f4; min-height:100vh; }
        .container { display:flex; justify-content:center; margin-top:40px; position:relative; }
        .image-wrap { position: relative; max-width:400px; width:100%; }
        .image-wrap img { display:block; width:100%; height:auto; border-radius:12px; border:2px solid #0077ff33; }

        /* hotspots responsivos (use porcentagens para posicionar) */
        .hotspot {
            position: absolute;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            border: 2px solid #fff;
            box-shadow: 0 1px 6px rgba(0,0,0,0.25);
            transform: translate(-50%, -50%);
            cursor: pointer;
        }
        .hotspot.kidney { background: rgba(0,123,255,0.85); } /* marcador genérico */
        .hotspot.vein { background: rgba(0,122,204,0.95); border-color: #003f7f; } /* azul */
        .hotspot.artery { background: rgba(220,20,60,0.95); border-color: #7f0000; } /* vermelho */

        /* tooltip */
        #tooltip {
            display: none;
            position: absolute;
            background: #fff;
            color: #111;
            border: 1px solid #0077ff;
            border-radius: 8px;
            padding: 10px 12px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.12);
            z-index: 50;
            max-width: 260px;
            font-size: 0.95rem;
            line-height: 1.3;
            pointer-events: none;
        }

        /* legenda */
        .legend { display:flex; gap:12px; justify-content:center; margin-top:14px; font-size:0.95rem; }
        .legend span { display:flex; gap:8px; align-items:center; }
        .swatch { width:14px; height:14px; border-radius:3px; display:inline-block; }
        .swatch.vein { background:#0066cc; }
        .swatch.artery { background:#dc143c; }
    </style>
</head>
<body>
    <h1 style="text-align:center; margin-top:20px;">Sistema Urinário Interativo</h1>

    <div class="container">
        <div class="image-wrap" id="img-wrap" style="position:relative;">
            <!-- imagem em inicio/imagens (agora carregada via data-src com teste) -->
            <img data-src="sistema.png" src="" alt="Sistema Urinário" id="sistema-img">

            <!-- hotspots posicionados com porcentagens (ajuste fino conforme necessário) -->
            <!-- RIM ESQUERDO -->
            <button class="hotspot kidney" data-info="<strong>Rim Esquerdo</strong><br>Filtra o sangue, remove resíduos e excesso de água formando a urina. Regula eletrólitos e pressão arterial."
                style="left:35%; top:35%;" aria-label="Rim Esquerdo"></button>

            <!-- RIM DIREITO -->
            <button class="hotspot kidney" data-info="<strong>Rim Direito</strong><br>Mesma função do rim esquerdo: filtra o sangue, produz hormônios e equilibra fluidos."
                style="left:64%; top:35%;" aria-label="Rim Direito"></button>

            <!-- URETER (área central abaixo dos rins) -->
            <button class="hotspot kidney" data-info="<strong>Ureter</strong><br>Tubo que transporta a urina do rim até a bexiga por peristalse."
                style="left:42%; top:55%;" aria-label="Ureter"></button>

            <!-- BEXIGA -->
            <button class="hotspot kidney" data-info="<strong>Bexiga</strong><br>Órgão que armazena a urina até a micção; contrai para expulsá‑la."
                style="left:50%; top:72%;" aria-label="Bexiga"></button>

            <!-- URETRA -->
            <button class="hotspot kidney" data-info="<strong>Uretra</strong><br>Canal que conduz a urina da bexiga para exterior."
                style="left:50%; top:86%;" aria-label="Uretra"></button>

            <!-- VEIA RENAL (azul) - exemplo próximo ao rim esquerdo -->
            <button class="hotspot vein" data-info="<strong>Veia Renal</strong><br>Transporta o sangue filtrado do rim de volta para a circulação sistémica. Representada em azul."
                style="left:47%; top:24%;" aria-label="Veia Renal"></button>

            <!-- ARTÉRIA RENAL (vermelha) - exemplo próximo ao rim esquerdo -->
            <button class="hotspot artery" data-info="<strong>Artéria Renal</strong><br>Fornece sangue arterial rico em oxigénio e nutrientes ao rim para filtração. Representada em vermelho."
                style="left:53%; top:24%;" aria-label="Artéria Renal"></button>

            <div id="tooltip" aria-hidden="true"></div>
        </div>
    </div>

    <div class="legend">
        <span><span class="swatch vein"></span> Veia Renal (azul)</span>
        <span><span class="swatch artery"></span> Artéria Renal (vermelha)</span>
    </div>

    <script>
        // teste de carregamento da imagem e aplicação segura do src (evita problemas com espaços)
        (function(){
            const img = document.getElementById('sistema-img');
            if (!img) return;
            const raw = img.dataset.src || 'imagens/sistema.png';
            const encoded = raw.split('/').map(encodeURIComponent).join('/');
            const tester = new Image();
            tester.onload = () => {
                img.src = encoded;
                console.log('Imagem carregada:', encoded);
            };
            tester.onerror = () => {
                console.error('Falha ao carregar imagem:', raw);
                // opcional: mostrar placeholder embutido (pequeno SVG) para não deixar espaço vazio
                img.src = 'data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="400" height="240"><rect width="100%" height="100%" fill="%23f4f4f4"/><text x="50%" y="50%" dominant-baseline="middle" text-anchor="middle" fill="%23777" font-size="16">Imagem não encontrada</text></svg>';
            };
            tester.src = encoded;
        })();
    </script>
    <script>
        (function(){
            const wrap = document.getElementById('img-wrap');
            const tooltip = document.getElementById('tooltip');
            const hotspots = wrap.querySelectorAll('.hotspot');

            function showTip(html, x, y) {
                tooltip.innerHTML = html;
                tooltip.style.display = 'block';
                // posiciona relativo ao container da imagem
                const rect = wrap.getBoundingClientRect();
                const left = x - rect.left + 12;
                const top = y - rect.top + 12;
                // evita overflow
                tooltip.style.left = Math.max(8, Math.min(left, rect.width - 8 - tooltip.offsetWidth)) + 'px';
                tooltip.style.top = Math.max(8, Math.min(top, rect.height - 8 - tooltip.offsetHeight)) + 'px';
            }

            function hideTip() {
                tooltip.style.display = 'none';
            }

            hotspots.forEach(h => {
                h.addEventListener('mousemove', (e) => {
                    const info = h.dataset.info || h.getAttribute('aria-label') || '';
                    showTip(info, e.clientX, e.clientY);
                });
                h.addEventListener('mouseleave', hideTip);
                h.addEventListener('click', (e) => {
                    // em dispositivos touch: mostrar tooltip no clique por 3s
                    const info = h.dataset.info || h.getAttribute('aria-label') || '';
                    const rect = h.getBoundingClientRect();
                    showTip(info, rect.left + rect.width/2, rect.top + rect.height/2);
                    setTimeout(hideTip, 3000);
                });
            });

            // esconde tooltip se mouse sair da imagem
            const img = document.getElementById('sistema-img');
            img.addEventListener('mouseleave', hideTip);
        })();
    </script>
</body>
</html>
